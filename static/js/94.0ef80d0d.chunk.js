"use strict";(self.webpackChunkpractic_react=self.webpackChunkpractic_react||[]).push([[94],{6094:function(e,t,r){r.r(t),r.d(t,{default:function(){return D}});var n=r(4420),o="my-books-block_wrapper__pfqqB",a="my-books-block_title__8Zx0l",s=r(184),c=function(e){var t=e.title,r=e.children;return(0,s.jsxs)("div",{className:o,children:[(0,s.jsx)("h4",{className:a,children:t}),r]})},i=r(4942),u=r(1413),l=r(9439),f=r(2791),h={title:"",author:"",favorite:!1},m={form:"my-books-form_form__uzUuO",formGroup:"my-books-form_formGroup__N9DiJ",textField:"my-books-form_textField__PPfd4",checkbox:"my-books-form_checkbox__uc93+"},p=function(e){var t=e.onSubmit,r=(0,f.useState)((0,u.Z)({},h)),n=(0,l.Z)(r,2),o=n[0],a=n[1],c=(0,f.useRef)(!1);(0,f.useEffect)((function(){c.current.focus()}),[]);var p=function(e){var t=e.target;a((function(e){var r=t.name,n=t.value,o=t.checked,a="checkbox"===t.type?o:n;return(0,u.Z)((0,u.Z)({},e),{},(0,i.Z)({},r,a))}))},d=o.title,v=o.author,k=o.favorite;return(0,s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t((0,u.Z)({},o)),a((0,u.Z)({},h))},className:m.form,children:[(0,s.jsxs)("div",{className:m.formGroup,children:[(0,s.jsx)("label",{children:"Book title"}),(0,s.jsx)("input",{ref:c,value:d,name:"title",onChange:p,className:m.textFieled})]}),(0,s.jsxs)("div",{className:m.formGroup,children:[(0,s.jsx)("label",{children:"Book author"}),(0,s.jsx)("input",{value:v,name:"author",onChange:p,className:m.textFieled})]}),(0,s.jsxs)("div",{className:m.formGroup,children:[(0,s.jsx)("label",{children:"Favorite"}),(0,s.jsx)("input",{checked:k,name:"favorite",onChange:p,className:m.checkbox,type:"checkbox"})]}),(0,s.jsx)("button",{type:"submit",children:"Add book"})]})},d="my-books-list_list__GhkyY",v="my-books-list_listItem__Bcqkp",k=function(e){var t=e.items,r=e.onDeleteBook,n=t.map((function(e){var t=e.id,n=e.title,o=e.author;return(0,s.jsxs)("li",{className:v,children:["Title: ",n,". Author: ",o,".",(0,s.jsx)("button",{onClick:function(){return r(t)},children:"delete"})]},t)}));return(0,s.jsx)("ol",{className:d,children:n})},b={wrapper:"my-books_wrapper__h-HVP",title:"my-books_title__4Jj6I",blocks:"my-books_blocks__Xfwd+"},x=r(3995),_=function(e){return e.filter},j=r(5577),y=r(5861),w=r(7757),N=r.n(w),C=r(5294).Z.create({baseURL:"https://64b55b40f3dbab5a95c732b2.mockapi.io/books"}),Z=function(e){return C.delete("/".concat(e))},g=function(e){return C.post("/",e)},B=r(7007),L=function(e,t){var r=t.title,n=t.author,o=r.toLowerCase(),a=n.toLowerCase(),s=e.find((function(e){return e.title.toLowerCase()===o&&e.author.toLowerCase()===a}));return Boolean(s)},F=function(){var e=(0,n.v9)(x.Jx),t=(0,n.v9)(_),r=(0,n.I0)();(0,f.useEffect)((function(){r(function(){var e=function(){var e=(0,y.Z)(N().mark((function e(t){var r,n,o;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(B.ZT()),e.next=4,C.get("/");case 4:r=e.sent,n=r.data,t(B.V6(n)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),o=e.t0.response,t(B.Lg(o));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return e}())}),[r]);return(0,s.jsxs)("div",{className:b.wrapper,children:[(0,s.jsx)("h3",{className:b.title,children:"My Books"}),(0,s.jsxs)("div",{className:b.blocks,children:[(0,s.jsx)(c,{title:"Add book",children:(0,s.jsx)(p,{onSubmit:function(e){var t=e.title,n=e.author,o=e.favorite;r(function(e){var t=function(){var t=(0,y.Z)(N().mark((function t(r,n){var o,a,s,c,i;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=n(),a=o.books,!L(a.items,e)){t.next=4;break}return t.abrupt("return",alert("".concat(e.title," - ").concat(e.author," is already exist")));case 4:return r(B.w3()),t.next=7,g(e);case 7:s=t.sent,c=s.data,r(B.LB(c)),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),i=t.t0.response,r(B.yK(i));case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,r){return t.apply(this,arguments)}}();return t}({title:t,author:n,favorite:o}))}})}),(0,s.jsxs)(c,{title:"Book list",children:[(0,s.jsx)("input",{value:t,name:"filter",onChange:function(e){var t=e.target;r((0,j.T)(t.value))},className:b.textField,placeholder:"enter book title or author"}),(0,s.jsx)(k,{items:e,onDeleteBook:function(e){r(function(e){var t=function(){var t=(0,y.Z)(N().mark((function t(r){var n;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(B.ho()),t.next=4,Z(e);case 4:r(B.ml(e)),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),n=t.t0.response,r(B.p9(n));case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return t}(e))}})]})]})]})},G="my-books-page_title__0tEg7",D=function(){return(0,s.jsxs)("div",{className:"container",children:[(0,s.jsx)("h1",{className:G,children:"My books page"}),(0,s.jsx)(F,{})]})}},3995:function(e,t,r){r.d(t,{$O:function(){return n},Jx:function(){return o}});var n=function(e){return e.books.items.filter((function(e){return e.favorite}))},o=function(e){var t=e.filter,r=e.books;if(!t)return r.items;var n=t.toLowerCase();return r.items.filter((function(e){var t=e.title,r=e.author;return t.toLowerCase().includes(n)||r.toLowerCase().includes(n)}))}}}]);
//# sourceMappingURL=94.0ef80d0d.chunk.js.map